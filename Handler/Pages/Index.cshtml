@page
@model IndexModel
@{
    Layout = "Shared/_Layout";
    ViewData["Title"] = "Handler Web App";
}

@if ((string)@ViewData["PageName"] == "Start" || (string)@ViewData["PageName"] == "Home" || (string)@ViewData["PageName"] == "Refresh")
{
    <meta http-equiv="refresh" content="5">
}

@section Scripts {
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/datatables.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
}

@section menu {
    <div class="btn-group" role="group">
        <form method="post">
            <input class="@(((string)@ViewData["PageName"] == "Home") ? "btn btn-primary" : "btn btn-secondary")"
                   type="submit" value="Home" asp-page-handler="HomeButton" />
            <input class="@(((string)@ViewData["PageName"] == "Start") ? "btn btn-primary" : "btn btn-secondary")"
                   type="submit" value="Start" asp-page-handler="StartButton" />
            <input class="@(((string)@ViewData["PageName"] == "Refresh") ? "btn btn-primary" : "btn btn-secondary")"
                   type="submit" value="Refresh" asp-page-handler="RefreshButton" />
            <input class="@(((string)@ViewData["PageName"] == "Pause") ? "btn btn-primary" : "btn btn-secondary")"
                   type="submit" value="Pause" asp-page-handler="PauseButton" />
            <input class="@(((string)@ViewData["PageName"] == "Stop") ? "btn btn-primary" : "btn btn-secondary")"
                   type="submit" value="Stop" asp-page-handler="StopButton" />
            <input class="@(((string)@ViewData["PageName"] == "History") ? "btn btn-primary" : "btn btn-secondary")"
                   type="submit" value="History" asp-page-handler="HistoryButton" />
        </form>
    </div>
}

@if ((string)@ViewData["PageName"] != "Home")
{
<div class="center">   
    @await Html.PartialAsync("_JobGrid.cshtml", Model)
</div>
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#jobGrid').dataTable({
            fixedHeader: true
        });
    });
    var makePrimary = function () {
        //$("#Home").addClass("btn-secondary");
        //$(this).removeClass("btn-secondary");
        //$(this).addClass("btn-primary");
    }
    $("input").click(function () {
        $("input").removeClass("btn-primary");
        $(this).addClass("btn-primary");
    });
</script>